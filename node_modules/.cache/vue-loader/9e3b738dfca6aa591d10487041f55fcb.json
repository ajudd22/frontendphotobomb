{"remainingRequest":"/Users/student/Desktop/Lab5 copy/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student/Desktop/Lab5 copy/front-end/src/components/Comments.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/student/Desktop/Lab5 copy/front-end/src/components/Comments.vue","mtime":1592861097241},{"path":"/Users/student/Desktop/Lab5 copy/front-end/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student/Desktop/Lab5 copy/front-end/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/student/Desktop/Lab5 copy/front-end/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/student/Desktop/Lab5 copy/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student/Desktop/Lab5 copy/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi51c2VyLW5hbWUgewptYXJnaW4tbGVmdDogNDBweDsKcGFkZGluZzowcHg7Cn0KY29tbWVudC10ZXh0ewptYXJnaW46MHB4Owp9CgouY29tbWVudHsKd2lkdGg6IDEwMCU7CmJvcmRlcjogLjFweCBzb2xpZCBncmV5OwptYXJnaW46IDVweDsKcGFkZGluZzo1cHg7Cn0KCg=="},{"version":3,"sources":["Comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Comments.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id = \"comments\">\n  <form class=\"pure-form\" @submit.prevent=\"createComment\" v-if=\"user\">\n    <legend>Leave a comment:</legend>\n      <fieldset>\n        <textarea v-model=\"newComment\"></textarea>\n          <br />\n          <button class=\"pure-button space-right\">Cancel</button>\n          <button class=\"pure-button pure-button-primary\" type=\"submit\">Submit</button>\n      </fieldset>\n    </form>\n    <div class = \"comment\" v-for= \"comment in comments\" v-bind:key=\"comment._id\">\n      <h3 class = \"comment-text\">{{comment.comment}}</h3><h5 class = \"user-name\"> - {{comment.user.firstName}}  {{comment.user.lastName}}</h5>\n      <h6 class = \"comment-date\">{{formatDate(comment.created)}}</h6>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport moment from 'moment';\n  export default {\n    name: 'Comments',\n    data() {\n      return{\n        comments: null,\n        newComment: '',\n        error: '',\n        imgID: this.$route.params.id,\n      }\n    },\n    props: ['photoID'],\n    created () {\n      this.getComments();\n    },\n    computed: {\n      user() {\n        return this.$root.$data.user;\n      }\n    },\n    methods: {\n      formatDate(date) {\n        if (moment(date).diff(Date.now(), 'days') < 15)\n          return moment(date).fromNow();\n        else\n          return moment(date).format('d MMMM YYYY');\n      },\n      async createComment() {\n        try{\n          let response =  await axios.post(\"/api/comments/\" + this.$route.params.id, {comment: this.newComment});\n          this.getComments();\n          this.newComment =\"\";\n        } catch (error) {\n          this.error = \"Error: \" + error.response.data.message;\n          console.log(this.error);\n        }\n      },\n      async getComments() {\n        try{\n          let response = await axios.get(\"/api/comments/\" + this.$route.params.id);\n          this.comments = response.data;\n          console.log(response.data);\n        } catch(error) {\n          console.log(error);\n        }\n      },\n    },\n};\n</script>\n<style>\n.user-name {\nmargin-left: 40px;\npadding:0px;\n}\ncomment-text{\nmargin:0px;\n}\n\n.comment{\nwidth: 100%;\nborder: .1px solid grey;\nmargin: 5px;\npadding:5px;\n}\n\n</style>\n"]}]}